<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="common.css">
  <link rel="stylesheet" href="components.css">
  <title>求人</title>
    <style>
* {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
        }

.panel-left {
            flex: 2;
        }

        .panel-right {
            flex: 1;
        }

        .list.jobs {
            max-height: 380px;
        }

        .list.persons {
            max-height: 380px;
        }

        .date-input {
            max-width: 160px;
            padding-left: 10px;
        }

        .date-input.active {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(28, 123, 255, 0.12);
        }

        .search-input {
            width: 100%;
        }

        .item {
            padding: 10px 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--line);
            cursor: pointer;
            transition: background 0.12s ease;
        }

        .item:last-child {
            border-bottom: none;
        }

        .item:hover {
            background: #edf3ff;
        }

        .item.active {
            background: #dbe7ff;
        }

        .item-main {
            flex: 1;
        }

        .empty {
            padding: 16px 12px;
            color: var(--muted);
            font-size: 13px;
            text-align: center;
        }

        .item-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 2px;
        }

        .item-desc {
            font-size: 13px;
            color: var(--muted);
        }

        .item-time {
            color: var(--muted);
            font-size: 12px;
            white-space: nowrap;
        }

        .person-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
        }

        .person-name {
            font-weight: 600;
        }

        .person-belong {
            font-size: 12px;
            color: var(--muted);
            margin-left: 8px;
            white-space: nowrap;
        }

        .detail-text {
            margin-top: 4px;
            font-size: 14px;
            line-height: 1.7;
            word-break: break-all;
            border: 1px solid var(--line);
            border-radius: 10px;
            padding: 12px 14px;
            background: #fafbfe;
            min-height: 140px;
            color: #435065;
        }

        @media (max-width: 1100px) {
            .list.jobs,
            .list.persons {
                max-height: 320px;
            }

            .c-filter-grid {
                grid-template-columns: 1fr;
            }
        }
  </style>
</head>
<body>
<div class="page page-wide c-stack">
    <!-- 上半部分：列表 -->
    <div class="row c-split-grid">
        <div class="panel-left c-card c-card-pad">
            <div class="panel-title c-panel-title">求人列表</div>
            <div class="filters c-filter-grid">
                <div class="filter-group c-filter-group">
                    <span class="filter-label c-filter-label">时间</span>
                    <div class="chip-row c-chip-row">
                        <button class="chip c-chip active" data-range="all" type="button">全部</button>
                        <button class="chip c-chip" data-range="today" type="button">今天</button>
                        <button class="chip c-chip" data-range="yesterday" type="button">昨天</button>
                        <input id="job-date" class="input c-input date-input" type="date" aria-label="选择日期">
                    </div>
                </div>
                <div class="filter-group c-filter-group">
                    <span class="filter-label c-filter-label">关键字</span>
                    <input id="job-keyword" class="input c-input search-input" type="search" placeholder="搜索案件标题、描述或细节">
                </div>
            </div>
            <ul class="list c-list c-list-spaced jobs" id="job-list">
            </ul>
        </div>

        <div class="panel-right c-card c-card-pad">
            <div class="panel-title c-panel-title">人员列表</div>
            <ul class="list c-list c-list-spaced persons" id="person-list">
                <!-- 使用 data-detail 存放技术者详细信息 -->
                <li class="item active"
                    data-detail="这是技术者A的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。">
                    <div class="person-header">
                        <span class="person-name">技术者A</span>
                        <span class="person-belong">所属1</span>
                    </div>
                </li>
                <li class="item"
                    data-detail="这是技术者B的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。">
                    <div class="person-header">
                        <span class="person-name">技术者B</span>
                        <span class="person-belong">所属2</span>
                    </div>
                </li>
                <li class="item"
                    data-detail="这是技术者C的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。">
                    <div class="person-header">
                        <span class="person-name">技术者C</span>
                        <span class="person-belong">所属3</span>
                    </div>
                </li>
                <li class="item"
                    data-detail="这是技术者C的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。">
                    <div class="person-header">
                        <span class="person-name">技术者C</span>
                        <span class="person-belong">所属3</span>
                    </div>
                </li>
                <li class="item"
                    data-detail="这是技术者C的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。">
                    <div class="person-header">
                        <span class="person-name">技术者C</span>
                        <span class="person-belong">所属3</span>
                    </div>
                </li>
                <li class="item"
                    data-detail="这是技术者C的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。">
                    <div class="person-header">
                        <span class="person-name">技术者C</span>
                        <span class="person-belong">所属3</span>
                    </div>
                </li>
                <li class="item"
                    data-detail="这是技术者C的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。">
                    <div class="person-header">
                        <span class="person-name">技术者C</span>
                        <span class="person-belong">所属3</span>
                    </div>
                </li>
                <li class="item"
                    data-detail="这是技术者C的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。">
                    <div class="person-header">
                        <span class="person-name">技术者C</span>
                        <span class="person-belong">所属3</span>
                    </div>
                </li>
                <li class="item"
                    data-detail="这是技术者C的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。">
                    <div class="person-header">
                        <span class="person-name">技术者C</span>
                        <span class="person-belong">所属3</span>
                    </div>
                </li>
                <li class="item"
                    data-detail="这是技术者C的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。">
                    <div class="person-header">
                        <span class="person-name">技术者C</span>
                        <span class="person-belong">所属3</span>
                    </div>
                </li>
                <li class="item"
                    data-detail="这是技术者C的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。">
                    <div class="person-header">
                        <span class="person-name">技术者C</span>
                        <span class="person-belong">所属3</span>
                    </div>
                </li>
                <li class="item"
                    data-detail="这是技术者C的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。">
                    <div class="person-header">
                        <span class="person-name">技术者C</span>
                        <span class="person-belong">所属3</span>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <!-- 下半部分：详情 -->
    <div class="row c-split-grid">
        <div class="panel-left detail c-card c-card-pad">
            <div class="panel-title c-panel-title">求人详情</div>
            <div class="detail-text" id="job-detail">
                这是求人1的详细说明……ABCDEFG1234567890不想超出屏幕想自动换行。
            </div>
        </div>

        <div class="panel-right detail c-card c-card-pad">
            <div class="panel-title c-panel-title">技术者详情</div>
            <div class="detail-text" id="person-detail">
                这是技术者A的详细信息……ABCDEFG1234567890不想超出屏幕想自动换行。
            </div>
        </div>
    </div>
</div>

<script>
    const jobs = [
        { id: 1, title: '求人1标题', desc: '求人1的简单说明content', detail: '这是求人1的详细说明……ABCDEFG1234567890不想超出屏幕想自动换行。', date: '2025-12-01' },
        { id: 2, title: '求人2标题', desc: '求人2的简单说明content', detail: '这是求人2的详细说明……ABCDEFG1234567890不想超出屏幕想自动换行。', date: '2025-11-25' },
        { id: 3, title: '求人3标题', desc: '求人3的简单说明content', detail: '这是求人3的详细说明……ABCDEFG1234567890不想超出屏幕想自动换行。', date: '2025-11-20' },
        { id: 4, title: '求人4标题', desc: '求人4的简单说明content', detail: '这是求人4的详细说明……ABCDEFG1234567890不想超出屏幕想自动换行。', date: '2025-11-18' },
        { id: 5, title: '求人5标题', desc: '求人5的简单说明content', detail: '这是求人5的详细说明……ABCDEFG1234567890不想超出屏幕想自动换行。', date: '2025-11-12' },
        { id: 6, title: '求人6标题', desc: '求人6的简单说明content', detail: '这是求人6的详细说明……ABCDEFG1234567890不想超出屏幕想自动换行。', date: '2025-11-05' },
        { id: 7, title: '求人7标题', desc: '求人7的简单说明content', detail: '这是求人7的详细说明……ABCDEFG1234567890不想超出屏幕想自动换行。', date: '2025-10-29' },
        { id: 8, title: '求人8标题', desc: '求人8的简单说明content', detail: '这是求人8的详细说明……ABCDEFG1234567890不想超出屏幕想自动换行。', date: '2025-10-18' }
    ];

    const jobList = document.getElementById('job-list');
    const jobDetail = document.getElementById('job-detail');
    const jobKeyword = document.getElementById('job-keyword');
    const jobDate = document.getElementById('job-date');
    const dateButtons = Array.from(document.querySelectorAll('.chip[data-range]'));

    const filters = {
        range: 'all',
        customDate: ''
    };

    // 公共函数：给列表加点击事件
    const bindListClick = (listId, detailId) => {
        const list = document.getElementById(listId);
        const detail = document.getElementById(detailId);

        if (!list || !detail) return;

        list.addEventListener('click', function (e) {
            const item = e.target.closest('.item');
            if (!item) return;

            list.querySelectorAll('.item').forEach(li => li.classList.remove('active'));
            item.classList.add('active');

            const text = item.getAttribute('data-detail') || '';
            detail.textContent = text;
        });
    }

    const formatDate = (date) => date.toISOString().slice(0, 10);

    const renderJobList = (items) => {
        jobList.innerHTML = '';

        if (!items.length) {
            const empty = document.createElement('li');
            empty.className = 'empty';
            empty.textContent = '暂无匹配的求人';
            jobList.appendChild(empty);
            jobDetail.textContent = '暂无可显示的求人';
            return;
        }

        items.forEach((item, index) => {
            const li = document.createElement('li');
            li.className = 'item' + (index === 0 ? ' active' : '');
            li.dataset.detail = item.detail;
            li.dataset.id = item.id;

            const main = document.createElement('div');
            main.className = 'item-main';

            const title = document.createElement('div');
            title.className = 'item-title';
            title.textContent = item.title;

            const desc = document.createElement('div');
            desc.className = 'item-desc';
            desc.textContent = item.desc;

            const time = document.createElement('div');
            time.className = 'item-time';
            time.textContent = item.date;

            main.appendChild(title);
            main.appendChild(desc);
            li.appendChild(main);
            li.appendChild(time);
            jobList.appendChild(li);
        });

        const first = jobList.querySelector('.item');
        if (first) {
            jobDetail.textContent = first.dataset.detail || '';
        }
    }

    const applyFilters = () => {
        const today = formatDate(new Date());
        const yesterdayDate = new Date();
        yesterdayDate.setDate(yesterdayDate.getDate() - 1);
        const yesterday = formatDate(yesterdayDate);

        const keyword = jobKeyword.value.trim().toLowerCase();
        const targetDate = filters.range === 'today'
            ? today
            : filters.range === 'yesterday'
                ? yesterday
                : filters.range === 'custom'
                    ? filters.customDate
                    : '';

        const filtered = jobs.filter(item => {
            const matchKeyword = keyword
                ? (item.title + item.desc + item.detail).toLowerCase().includes(keyword)
                : true;
            const matchDate = targetDate ? item.date === targetDate : true;
            return matchKeyword && matchDate;
        });

        renderJobList(filtered);
    }

    dateButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            dateButtons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            filters.range = btn.dataset.range;
            filters.customDate = '';
            jobDate.value = '';
            jobDate.classList.remove('active');
            applyFilters();
        });
    });

    jobDate.addEventListener('change', () => {
        if (jobDate.value) {
            filters.range = 'custom';
            filters.customDate = jobDate.value;
            dateButtons.forEach(b => b.classList.remove('active'));
            jobDate.classList.add('active');
        } else {
            filters.range = 'all';
            filters.customDate = '';
            dateButtons.forEach(b => {
                b.classList.toggle('active', b.dataset.range === 'all');
            });
            jobDate.classList.remove('active');
        }
        applyFilters();
    });

    jobKeyword.addEventListener('input', () => {
        applyFilters();
    });

    renderJobList(jobs);
    bindListClick('job-list', 'job-detail');
    bindListClick('person-list', 'person-detail');
</script>
</body>
</html>
